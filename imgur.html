<!DOCTYPE html>
<html>

<head>
  <title>IMGUR TEST</title>
  <style>
  #div1 {
    width: 350px;
    height: 70px;
    padding: 10px;
    border: 1px solid #aaaaaa;
  }
  </style>
</head>

<body>
  <div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
  <div class="fileUpload">
    <span class="custom-span">+</span>
    <p class="custom-para">Add Images</p>
    <input id="uploadBtn" type="file" class="upload" />
  </div>
  <input id="uploadFile" placeholder="0 files selected" disabled="disabled" />
  <br>
  <img id="displayImage" src="">
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script>
  var imgur_client_id = "cffdbdcf9cb88c7";

  function allowDrop(ev) {
    ev.preventDefault();
  }

  function drag(ev) {
    ev.dataTransfer.setData("file", ev.target.id);
  }

  function drop(ev) {
    ev.preventDefault();
    console.log(this.value);
    var data = ev.dataTransfer.getData("file");
  }

  document.getElementById("uploadBtn").onchange  =   function (event)  {
    document.getElementById("uploadFile").value  =  this.value;
    console.log(event);
    console.log(this.value);
    var file = this.files[0];
    var reader = new FileReader();
    reader.onloadend = function() {
      $("#displayImage").attr("src", reader.result);
      var base64result = reader.result.split(',')[1];
      var form = new FormData();
      form.append("image", base64result);

      var settings = {
        "async": true,
        "crossDomain": true,
        "url": "https://api.imgur.com/3/image",
        "method": "POST",
        "headers": {
          "authorization": `Client-ID ${imgur_client_id}`
        },
        "processData": false,
        "contentType": false,
        "mimeType": "multipart/form-data",
        "data": form
      }

      $.ajax(settings).done(function(response) {
        var res = JSON.parse(response);
        console.log(res.data.link);
      });
    }
    reader.readAsDataURL(file);

  };
  </script>
</body>

</html>